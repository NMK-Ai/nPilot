# التحكم باليد

**الأجهزة المطلوبة**: جهاز يعمل بنظام القائد الآلي , كمبيوتر محمول, بيد التحكم (إختياري)

باستخدام عصا التحكم ، يمكنك توصيل الكمبيوتر المحمول بجهاز الايون عبر شبكة الكان وتصحيح عناصر التحكم باستخدام عصا التحكم أو لوحة المفاتيح.
يد التحمن يستخدم [مدخلات] (https://pypi.org/project/inputs) التي تدعم العديد من أجهزة الألعاب وأذرع التحكم الشائعة.

## طريقة الاستعمال

يجب أن تكون السيارة مطفأة, ويجب أن يكون برنامج القائد الآلي على الطرق الوعرة قبل البدء `بيد التحكم`.

### باستخدام لوحة المفاتيح

أس أس أتش في جهاز الأيون الخاص بك وابدأ التحكم باستخدام الأمر التالي:

```shell
tools/joystick/joystickd.py --keyboard
```

ستتم طباعة الأزرار والمحاور المتوفرة لإظهار تعيينات المفاتيح الخاصة بهم. بشكل عام ، تتحكم مفاتيح WASD في البنزين والمكابح وعزم دوران التوجيه بزيادات قدرها 5٪.

### يد التحكم على كوما ثلاثة

قم بتوصيل عصا التحكم في منفذ USB-C ذي كوما ثلاثة. بعد ذلك ، أدخل SSH في الجهاز وابدأ `joystickd.py`.

### يد التحكم على الكمبيوتر المحمول الخاص بك
من أجل استخدام عصا التحكم عبر التوصيل ، نحتاج إلى تشغيل يد التحكم مباشرة من الكمبيوتر المحمول الخاص بك وجعله يرسل حزم "testJoystick" عبر التوصيل إلى جهاز الأيون.

1. قم بتوصيل يد التحكم بجهاز الكمبيوتر الخاص بك.
2. قم بتوصيل الكمبيوتر المحمول بنقطة اتصال جهاز الأيون وافتح اتصال SSH جديدًا. نظرًا لأنه يتم تشغيل يد التحكم على الكمبيوتر المحمول ، فنحن بحاجة إلى كتابة أوامر للتحكم بالمركبة بالبدء في وضع تصحيح أخطاء عصا التحكم:
   ```shell
   # على جهاز الأيون الخاص بك
   echo -n "1" > /data/params/d/JoystickDebugMode
   ```
3. قم بتشغيل الجسر باستخدام عنوان IP الخاص بجهاز الكمبيوتر المحمول. يؤدي هذا إلى إعادة نشر حزم "بيد التحكم" المرسلة من الكمبيوتر المحمول الخاص بك حتى يتمكن القائد الآلي من استقبالها:
   ```shell
   # على جهاز الأيون الخاص بك
   cereal/messaging/bridge {LAPTOP_IP} testJoystick
   ```
4. ابدأ بيد التحكم على الكمبيوتر المحمول في وضع ZMQ.
   ```shell
   # على الكمبيوتر المحمول الخاص بك
   export ZMQ=1
   tools/joystick/joystickd.py
   ```

---
الآن ابدأ تشغيل سيارتك ويجب أن ينتقل القائد الآلي إلى وضع يد التحكم مع تنبيه عند بدء التشغيل! سيتم عرض حالة التحكم في التنبيه ، بينما تتم طباعة حالات الأزرار في الوجاهة.

تأكد من استيفاء الشروط في الباندا للسماح بعناصر التحكم (مثل تشغيل مثبت السرعة). يمكنك أيضًا إجراء تعديل على رمز الباندا للسماح دائمًا بعناصر التحكم.

![](steer.gif)
